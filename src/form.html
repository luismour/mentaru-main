<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" href="/css/global.css" />
    <link rel="stylesheet" href="css/form.css" />
   
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Paytone One:wght@400&display=swap"
    />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Formulário</h1>
      </header>
      <div class="form-container" style="margin-left: 20%">
        <div class="form-conteudo coluna">
            <form id="tlxForm1">
                <label for="dimension" style="margin-left: 25%;">Qual a sua demanda fisíca no trabalho?</label>
                <div class="input-container">
                    <input style="margin-left: 10%; border-radius: px; width: 80%;" type="range" id="dimension1" name="dimension1" min="0" max="100" value="50" />
                    <div id="emoji-feedback" style="margin-left: 20px;">😊</div>
                </div>
            </form>
          
        </div>
        <div class="form-conteudo coluna">
          <form id="tlxForm1">
              <label for="dimension" style="margin-left: 25%;;">Qual a sua demanda mental no trabalho?</label>
              <div class="input-container">
                  <input style="margin-left: 10%; border-radius: px; width: 80%;" type="range" id="dimension2" name="dimension1" min="0" max="100" value="50" />
                  <div id="emoji-feedback" style="margin-left: 20px;">😊</div>
              </div>
          </form>
        </div>
        <div class="form-conteudo coluna">
          <form id="tlxForm1">
              <label for="dimension" style="margin-left: 25%;;">Qual a sua demanda temporal no trabalho?</label>
              <div class="input-container">
                  <input style="margin-left: 10%; border-radius: px; width: 80%;" type="range" id="dimension3" name="dimension1" min="0" max="100" value="50" />
                  <div id="emoji-feedback" style="margin-left: 20px;">😊</div>
              </div>
          </form>
        </div>
        <div class="form-conteudo coluna">
          <form id="tlxForm1">
              <label for="dimension" style="margin-left: 25%;;">Qual o seu nível de esforço no trabalho?</label>
              <div class="input-container">
                  <input style="margin-left: 10%; border-radius: px; width: 80%;" type="range" id="dimension4" name="dimension1" min="0" max="100" value="50" />
                  <div id="emoji-feedback" style="margin-left: 20px;">😊</div>
              </div>
        </form>
        </div>
        <div class="form-conteudo coluna">
          <form id="tlxForm1">
              <label for="dimension" style="margin-left: 25%;;">Qual o seu nível de frustração no trabalho?<label>
              <div class="input-container">
                  <input style="margin-left: 10%; border-radius: 5px; width: 80%;" type="range" id="dimension5" name="dimension1" min="0" max="100" value="50" />
                  <div id="emoji-feedback" style="margin-left: 20px;">😊</div>
              </div>
          </form>
        </div>
        <div class="form-conteudo coluna">
          <form id="tlxForm1">
              <label for="dimension" style="margin-left: 25%;;">Qual o seu nível de desempenho no trabalho?</label>
              <div class="input-container">
                  <input style="margin-left: 10%; border-radius: px; width: 80%;" type="range" id="dimension6" name="dimension1" min="0" max="100" value="50" />
                  <div id="emoji-feedback" style="margin-left: 20px;">😊</div>
              </div>
          </form>
        </div>
        <div class="text-box">
          <a href="http://localhost:8080/home" class="btn btn-white btn-animate">Enviar</a>
      </div>
    </div>
    
    </div>
    <!-- Após os elementos input -->
   
    </div>
    <!-- Antes do fechamento da tag </body> -->
    <script>
      // Seletor para todos os elementos input range
      const inputRanges = document.querySelectorAll("input[type=range]");

      // Seletor para todos os elementos de feedback de emoji
      const emojiFeedbacks = document.querySelectorAll("#emoji-feedback");

      // Lista de emojis representando diferentes estados
      const emojis = ["😊", "😄", "😐", "😟", "😢"];

      // Função para atualizar o emoji com base no valor do input range
      function updateEmoji(event) {
        // Obtém o índice do input range atual no NodeList
        const index = Array.from(inputRanges).indexOf(event.target);

        // Obtém o valor atual do input range
        const value = event.target.value;

        // Calcula o índice do emoji com base no valor do input
        const emojiIndex = Math.floor((value / 100) * emojis.length);

        // Atualiza o emoji no elemento de feedback correspondente
        emojiFeedbacks[index].textContent = emojis[emojiIndex];
      }

      // Adiciona um ouvinte de eventos para cada input range
      inputRanges.forEach(inputRange => {
        inputRange.addEventListener("input", updateEmoji);

              // Função para calcular o índice TLX com base nos valores dos input ranges
      function calcularTLX() {
        // Obtém os valores dos input ranges
        const valores = Array.from(inputRanges).map(input => parseInt(input.value));

        // Calcula o índice TLX usando a fórmula específica (adaptada para este exemplo)
        const ponderado = [1, 2, 3, 4, 5, 6]; // Pesos para cada dimensão
        const somaPonderada = valores.reduce((acc, valor, index) => acc + valor * ponderado[index], 0);
        const tlx = somaPonderada / 15; // Normaliza o resultado para obter o índice TLX (0 a 100)

        // Atualiza o emoji com base no índice TLX calculado
        const emojiIndex = Math.min(Math.floor(tlx / 20), emojis.length - 1);
        emojiFeedback.textContent = emojis[emojiIndex];

        // Exibe o índice TLX no console (você pode querer fazer algo mais útil com esse valor)
        console.log("Índice TLX:", tlx);
      }

      // Adiciona um ouvinte de eventos para cada input range
      inputRanges.forEach(inputRange => {
        inputRange.addEventListener("input", calcularTLX);
      });
            });

            function calcularTLXERedirecionar() {
  // Obtém os valores dos input ranges
  const valores = Array.from(inputRanges).map(input => parseInt(input.value));

  // Calcula o índice TLX usando a fórmula específica (adaptada para este exemplo)
  const ponderado = [1, 2, 3, 4, 5, 6]; // Pesos para cada dimensão
  const somaPonderada = valores.reduce((acc, valor, index) => acc + valor * ponderado[index], 0);
  const tlx = somaPonderada / 15; // Normaliza o resultado para obter o índice TLX (0 a 100)

  // Redireciona para a outra página com o valor do índice TLX como parâmetro na URL
  window.location.href = `http://localhost:8080/outra_pagina?tlx=${tlx}`;
}

// Adiciona um ouvinte de eventos para o botão "click me"
const btnClickMe = document.querySelector(".btn-animate");
btnClickMe.addEventListener("click", calcularTLXERedirecionar);

    </script>
  </body>
</html>
